# AI μ—μ΄μ „νΈ 'MCP μ„λ²„' λ°±μ—”λ“ (Python)

μ΄ ν”„λ΅μ νΈλ” μ‚¬μ©μμ μ§λ¬Έ μλ„λ¥Ό νμ•…ν•κ³ , μ‚¬μ „ μ •μλ λ„κµ¬(Tools)λ¥Ό μ‚¬μ©ν•μ—¬ μµμ μ λ‹µλ³€μ„ μƒμ„±ν•λ” μ§€λ¥ν• AI μ—μ΄μ „νΈ API μ„λ²„μ…λ‹λ‹¤.

## π€ μ‹μ‘ν•κΈ°

### μ‚¬μ „ μ”κµ¬μ‚¬ν•­

- Python 3.8 μ΄μƒ
- `pip` (Python ν¨ν‚¤μ§€ κ΄€λ¦¬μ)

### 1. ν”„λ΅μ νΈ μ„¤μ •

#### κ°€μƒν™κ²½ μƒμ„± λ° ν™μ„±ν™”

μ΄ ν”„λ΅μ νΈλ” Python κ°€μƒν™κ²½(`venv`)μ„ μ‚¬μ©ν•μ—¬ μμ΅΄μ„±μ„ μ‹μ¤ν… μ „μ²΄μ™€ κ²©λ¦¬ν•μ—¬ κ΄€λ¦¬ν•λ” κ²ƒμ„ κ¶μ¥ν•©λ‹λ‹¤.

1.  **κ°€μƒν™κ²½ μƒμ„±**
    ν”„λ΅μ νΈ λ£¨νΈ λ””λ ‰ν† λ¦¬μ—μ„ μ•„λ λ…λ Ήμ–΄λ¥Ό μ‹¤ν–‰ν•μ—¬ `venv`λΌλ” μ΄λ¦„μ κ°€μƒν™κ²½μ„ μƒμ„±ν•©λ‹λ‹¤.

    ```bash
    python3 -m venv venv
    ```

2.  **κ°€μƒν™κ²½ ν™μ„±ν™”**
    μƒμ„±λ κ°€μƒν™κ²½μ„ ν™μ„±ν™”ν•©λ‹λ‹¤.
    ```bash
    source venv/bin/activate
    ```
    ν„°λ―Έλ„ ν”„λ΅¬ν”„νΈ μ•μ— `(venv)`κ°€ ν‘μ‹λλ©΄ μ„±κ³µμ μΌλ΅ ν™μ„±ν™”λ κ²ƒμ…λ‹λ‹¤.

### 2. μμ΅΄μ„± λΌμ΄λΈλ¬λ¦¬ μ„¤μΉ

ν”„λ΅μ νΈμ— ν•„μ”ν• λ¨λ“  λΌμ΄λΈλ¬λ¦¬λ” `requirements.txt` νμΌμ— λ…μ‹λμ–΄ μμµλ‹λ‹¤.

1.  **Python λΌμ΄λΈλ¬λ¦¬ μ„¤μΉ**
    κ°€μƒν™κ²½μ΄ ν™μ„±ν™”λ μƒνƒμ—μ„ μ•„λ λ…λ Ήμ–΄λ¥Ό μ‹¤ν–‰ν•μ—¬ ν•„μ”ν• λΌμ΄λΈλ¬λ¦¬λ¥Ό λ¨λ‘ μ„¤μΉν•©λ‹λ‹¤.

    ```bash
    pip install -r requirements.txt
    ```

2.  **Playwright λΈλΌμ°μ € μ„¤μΉ**
    RAG λ°μ΄ν„° μμ§‘μ— μ‚¬μ©λλ” ν—¤λ“λ¦¬μ¤ λΈλΌμ°μ €(Playwright)λ¥Ό μ„¤μΉν•©λ‹λ‹¤.
    ```bash
    playwright install
    ```

### 3. ν™κ²½λ³€μ μ„¤μ •

OpenAI API ν‚¤μ™€ κ°™μ€ λ―Όκ°ν• μ •λ³΄λ” `.env` νμΌμ„ ν†µν•΄ κ΄€λ¦¬ν•©λ‹λ‹¤.

1.  `.env.example` νμΌμ„ λ³µμ‚¬ν•μ—¬ `.env` νμΌμ„ μƒμ„±ν•©λ‹λ‹¤.

    ```bash
    cp .env.example .env
    ```

2.  μƒμ„±λ `.env` νμΌμ„ μ—΄μ–΄ `"YOUR_OPENAI_API_KEY_HERE"` λ¶€λ¶„μ„ λ³ΈμΈμ μ‹¤μ  OpenAI API ν‚¤λ΅ κµμ²΄ν•©λ‹λ‹¤.
    ```
    OPENAI_API_KEY="sk-..."
    ```

## πƒβ€β™€οΈ μ„λ²„ μ‹¤ν–‰

λ¨λ“  μ„¤μ •μ΄ μ™„λ£λμ—λ‹¤λ©΄, μ•„λ λ…λ Ήμ–΄λ¥Ό μ‹¤ν–‰ν•μ—¬ FastAPI κ°λ° μ„λ²„λ¥Ό μ‹μ‘ν•©λ‹λ‹¤.

```bash
uvicorn main:app --reload
```

- `--reload` μµμ…μ€ μ½”λ“κ°€ λ³€κ²½λ  λ•λ§λ‹¤ μ„λ²„λ¥Ό μλ™μΌλ΅ μ¬μ‹μ‘ν•΄μ£Όλ” νΈλ¦¬ν• κΈ°λ¥μ…λ‹λ‹¤.

μ„λ²„κ°€ μ„±κ³µμ μΌλ΅ μ‹¤ν–‰λλ©΄ ν„°λ―Έλ„μ— `Uvicorn running on http://127.0.0.1:8000` λ©”μ‹μ§€κ°€ ν‘μ‹λ©λ‹λ‹¤.

## π“– API μ‚¬μ© μμ‹

### RAG λ°μ΄ν„°λ² μ΄μ¤ κµ¬μ¶•

μ‚¬μ΄νΈμ `sitemap.xml`μ„ κΈ°λ°μΌλ΅ RAG λ°μ΄ν„°λ² μ΄μ¤λ¥Ό κµ¬μ¶•ν•©λ‹λ‹¤. `site_url` νλΌλ―Έν„°μ— `sitemap.xml`μ΄ μ„μΉν• μ‚¬μ΄νΈμ URLμ„ μ „λ‹¬ν•©λ‹λ‹¤.

- **μ‹¤μ„λ²„ λ€μƒ**
  μ‹¤μ„λ²„(`https://www.megazone.com`)λ¥Ό λ€μƒμΌλ΅ RAGλ¥Ό κµ¬μ¶•ν•λ” μμ‹μ…λ‹λ‹¤.

  ```bash
  curl -X POST "http://127.0.0.1:8000/build-rag" \
  -H "Content-Type: application/json" \
  -d '{"site_url": "https://www.megazone.com"}'
  ```

- **λ΅μ»¬ λΉλ“ κ²°κ³Όλ¬Ό λ€μƒ**
  Next.js ν”„λ΅μ νΈλ¥Ό λ΅μ»¬μ—μ„ λΉλ“ν•κ³  μ‹¤ν–‰ν• ν›„(`http://localhost:3000`), ν•΄λ‹Ή λ΅μ»¬ μ„λ²„λ¥Ό λ€μƒμΌλ΅ RAGλ¥Ό κµ¬μ¶•ν•λ” μμ‹μ…λ‹λ‹¤.

  ```bash
  curl -X POST "http://127.0.0.1:8000/build-rag" \
  -H "Content-Type: application/json" \
  -d '{"site_url": "http://localhost:3000"}'
  ```

### AI μ—μ΄μ „νΈμ—κ² μ§λ¬Έν•κΈ°

μ„λ²„κ°€ μ‹¤ν–‰ μ¤‘μΌ λ•, μ•„λ `curl` λ…λ Ήμ–΄λ¥Ό μ‚¬μ©ν•μ—¬ `/query` μ—”λ“ν¬μΈνΈλ΅ AI μ—μ΄μ „νΈμ—κ² μ§λ¬Έμ„ λ³΄λ‚Ό μ μμµλ‹λ‹¤.

```bash
curl -X POST "http://127.0.0.1:8000/query" \
-H "Content-Type: application/json" \
-d '{"question": "λ©”κ°€μ΅΄ν΄λΌμ°λ“μ AI λ°μ΄ν„° μ†”λ£¨μ…μ—λ” μ–΄λ–¤ κ²ƒλ“¤μ΄ μλ‚μ”?"}'
```

## β… λ°μ΄ν„°λ² μ΄μ¤ ν™•μΈ

RAG λ°μ΄ν„°κ°€ λ²΅ν„° λ°μ΄ν„°λ² μ΄μ¤μ— μ μ €μ¥λμ—λ”μ§€ ν™•μΈν•κ³  μ‹¶μ„ λ•, μ•„λ λ…λ Ήμ–΄λ¥Ό μ‚¬μ©ν•  μ μμµλ‹λ‹¤.

μ΄ μ¤ν¬λ¦½νΈλ” DBμ— μ €μ¥λ μ΄ μ•„μ΄ν…μ κ°μμ™€ μΌλ¶€ λ°μ΄ν„° μƒν”μ„ μ¶λ ¥ν•©λ‹λ‹¤.

```bash
python check_vector_db.py
```

### RAG κ²€μƒ‰ ν…μ¤νΈ (CLI)

API μ„λ²„μ™€λ” λ³„κ°λ΅, ν„°λ―Έλ„μ—μ„ μ§μ ‘ RAG κ²€μƒ‰ κΈ°λ¥μ μ„±λ¥μ„ ν…μ¤νΈν•΄λ³Ό μ μμµλ‹λ‹¤.

```bash
python interactive_rag_test.py
```

μ¤ν¬λ¦½νΈλ¥Ό μ‹¤ν–‰ν•λ©΄ μ§λ¬Έμ„ μ…λ ¥ν•λΌλ” μ•λ‚΄κ°€ λ‚μµλ‹λ‹¤. μ§λ¬Έμ„ μ…λ ¥ν•λ©΄ DBμ—μ„ κ²€μƒ‰λ κ²°κ³Όλ¥Ό λ°”λ΅ ν™•μΈν•  μ μμµλ‹λ‹¤.
